package com.cavetale.core.exploits;

import com.cavetale.core.CorePlugin;
import org.bukkit.block.Block;

public interface PlayerPlacedBlocks {
    default void register() {
        Companion.inst = this;
        CorePlugin.getInstance().getLogger().info("PlayerPlacedBlocks registered: " + getClass().getName());
    }

    default void unregister() {
        Companion.inst = Companion.DEFAULT;
    }

    static PlayerPlacedBlocks get() {
        return Companion.inst;
    }

    boolean is(Block block);

    void set(Block block, boolean value);

    static boolean isPlayerPlaced(Block block) {
        return get().is(block);
    }

    static void setPlayerPlaced(Block block, boolean value) {
        get().set(block, value);
    }
}

final class Companion {
    protected static final PlayerPlacedBlocks DEFAULT = new PlayerPlacedBlocks() {
            @Override public boolean is(Block block) {
                return false;
            }
            @Override public void set(Block block, boolean value) { }
        };

    protected static PlayerPlacedBlocks inst = DEFAULT;

    private Companion() { }
}
